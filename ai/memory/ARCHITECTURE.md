# Memory ç»¼åˆæ¶æ„è®¾è®¡

## ä¸€ã€æ ¸å¿ƒä»·å€¼åˆ†æ

### ğŸ† æœ€æœ‰ä»·å€¼çš„æ€è·¯ï¼ˆTop 5ï¼‰

#### 1. **HindSight - Retain/Recall/Reflect ä¸‰æ“ä½œèŒƒå¼** â­â­â­â­â­
- **æ ¸å¿ƒä»·å€¼**ï¼šå°†è®°å¿†æ“ä½œæŠ½è±¡ä¸ºä¸‰ä¸ªåŸºç¡€åŸè¯­ï¼Œè¿™æ˜¯æœ€ä¼˜é›…çš„è®¾è®¡
- **å…³é”®åˆ›æ–°**ï¼š
  - Retainï¼šç»“æ„åŒ–å­˜å‚¨ï¼ˆè€Œéç®€å•å †ç Œï¼‰
  - Recallï¼šæ™ºèƒ½æ£€ç´¢ï¼ˆè€Œéå…¨é‡åŠ è½½ï¼‰
  - Reflectï¼šæ¨ç†æ›´æ–°ï¼ˆè€Œéé™æ€å­˜å‚¨ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šæ‰€æœ‰éœ€è¦è®°å¿†çš„ Agent ç³»ç»Ÿ

#### 2. **CogMem - åˆ†å±‚è®°å¿†æ¶æ„** â­â­â­â­â­
- **æ ¸å¿ƒä»·å€¼**ï¼šæ¨¡ä»¿äººç±»è®¤çŸ¥çš„ä¸‰å±‚ç»“æ„ï¼Œç¬¦åˆè®¤çŸ¥ç§‘å­¦åŸç†
- **å…³é”®åˆ›æ–°**ï¼š
  - FoAï¼ˆæ³¨æ„åŠ›ç„¦ç‚¹ï¼‰ï¼šå½“å‰å·¥ä½œåŒº
  - DAï¼ˆç›´æ¥è®¿é—®ï¼‰ï¼šå¿«é€Ÿæ£€ç´¢åŒº
  - LTMï¼ˆé•¿æœŸè®°å¿†ï¼‰ï¼šæŒä¹…å­˜å‚¨åŒº
- **é€‚ç”¨åœºæ™¯**ï¼šé•¿å¯¹è¯ã€å¤šè½®äº¤äº’ç³»ç»Ÿ

#### 3. **A-Mem - Zettelkasten åŠ¨æ€è®°å¿†ç½‘ç»œ** â­â­â­â­
- **æ ¸å¿ƒä»·å€¼**ï¼šè®°å¿†ä¸æ˜¯å­¤ç«‹çš„ï¼Œè€Œæ˜¯ç›¸äº’å…³è”çš„çŸ¥è¯†ç½‘ç»œ
- **å…³é”®åˆ›æ–°**ï¼š
  - åŠ¨æ€ç´¢å¼•å’Œé“¾æ¥æœºåˆ¶
  - è®°å¿†è¿›åŒ–ï¼ˆæ–°è®°å¿†è§¦å‘æ—§è®°å¿†æ›´æ–°ï¼‰
  - ç»“æ„åŒ–å±æ€§ï¼ˆä¸Šä¸‹æ–‡ã€å…³é”®è¯ã€æ ‡ç­¾ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šçŸ¥è¯†å¯†é›†å‹ä»»åŠ¡ã€éœ€è¦æ¨ç†çš„ç³»ç»Ÿ

#### 4. **LightMem - ä¸‰å±‚è®°å¿† + ç¡çœ æ›´æ–°æœºåˆ¶** â­â­â­â­
- **æ ¸å¿ƒä»·å€¼**ï¼šè½»é‡çº§è®¾è®¡ + åˆ›æ–°çš„"ç¡çœ æ—¶é—´"æ›´æ–°æœºåˆ¶
- **å…³é”®åˆ›æ–°**ï¼š
  - æ„Ÿè§‰è®°å¿†è¿‡æ»¤å™¨ï¼ˆLight1ï¼‰
  - çŸ­æ—¶è®°å¿†è¯é¢˜ç®¡å®¶ï¼ˆLight2ï¼‰
  - é•¿æ—¶è®°å¿†ä¸ç¡çœ æ—¶é—´æ›´æ–°å™¨ï¼ˆLight3ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šèµ„æºå—é™åœºæ™¯ã€éœ€è¦é«˜æ•ˆæ›´æ–°çš„ç³»ç»Ÿ

#### 5. **MemMachine - å¤šç±»å‹è®°å¿†æ•´åˆ** â­â­â­â­
- **æ ¸å¿ƒä»·å€¼**ï¼šä¸åŒåœºæ™¯éœ€è¦ä¸åŒç±»å‹çš„è®°å¿†
- **å…³é”®åˆ›æ–°**ï¼š
  - æƒ…æ™¯è®°å¿†ï¼ˆäº‹ä»¶çº§ï¼‰
  - è¯­ä¹‰è®°å¿†ï¼ˆæ¦‚å¿µçº§ï¼‰
  - ç”¨æˆ·ç”»åƒè®°å¿†ï¼ˆä¸ªæ€§åŒ–ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šé€šç”¨ Agent å¹³å°

### ğŸ’¡ å…¶ä»–æœ‰ä»·å€¼çš„æ€è·¯

- **ACON**ï¼šä¸Šä¸‹æ–‡å‹ç¼© + æ¨¡å‹è’¸é¦ï¼ˆé™ä½è®¡ç®—æˆæœ¬ï¼‰
- **Every Token Counts**ï¼šç«¯åˆ°ç«¯å¯å­¦ä¹ æ£€ç´¢ï¼ˆæå‡æ£€ç´¢è´¨é‡ï¼‰
- **O-Mem**ï¼šä¸»åŠ¨ç”¨æˆ·ç”»åƒï¼ˆä¸ªæ€§åŒ–å¢å¼ºï¼‰
- **STMA**ï¼šæ—¶ç©ºè®°å¿†æ•´åˆï¼ˆå…·èº«ä»»åŠ¡ï¼‰
- **Titans**ï¼šæµ‹è¯•æ—¶è®­ç»ƒï¼ˆåœ¨çº¿å­¦ä¹ ï¼‰

---

## äºŒã€ç»¼åˆæ¶æ„è®¾è®¡ï¼šUniMemï¼ˆç»Ÿä¸€è®°å¿†ç³»ç»Ÿï¼‰

### è®¾è®¡ç†å¿µ

**"åˆ†å±‚å­˜å‚¨ + åŠ¨æ€ç½‘ç»œ + æ™ºèƒ½æ“ä½œ"**

ç»“åˆè®¤çŸ¥ç§‘å­¦ã€ä¿¡æ¯æ£€ç´¢ã€çŸ¥è¯†å›¾è°±çš„æœ€ä½³å®è·µï¼Œè®¾è®¡ä¸€ä¸ªæ—¢ç¬¦åˆäººç±»è®¤çŸ¥è§„å¾‹ï¼Œåˆå…·å¤‡å·¥ç¨‹å¯è¡Œæ€§çš„è®°å¿†ç³»ç»Ÿã€‚

### æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UniMem ç»Ÿä¸€è®°å¿†ç³»ç»Ÿ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  æ“ä½œå±‚      â”‚  â”‚  å­˜å‚¨å±‚      â”‚  â”‚  ç½‘ç»œå±‚      â”‚ â”‚
â”‚  â”‚ (Operations) â”‚  â”‚  (Storage)   â”‚  â”‚  (Network)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                 â”‚                 â”‚            â”‚
â”‚  Retain â”‚ Recall â”‚ Reflect   åˆ†å±‚è®°å¿†ç³»ç»Ÿ    åŠ¨æ€è®°å¿†ç½‘ç»œ  â”‚
â”‚         â”‚                 â”‚                 â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚ FoA       â”‚    â”‚ DA        â”‚    â”‚ LTM       â”‚
    â”‚ (å·¥ä½œè®°å¿†) â”‚    â”‚ (å¿«é€Ÿè®¿é—®) â”‚    â”‚ (é•¿æœŸå­˜å‚¨) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. **æ“ä½œå±‚ï¼ˆOperation Layerï¼‰** - åŸºäº HindSight

```python
class UniMemOperations:
    """
    ç»Ÿä¸€è®°å¿†æ“ä½œæ¥å£
    åŸºäº HindSight çš„ Retain/Recall/Reflect èŒƒå¼
    """
    
    def retain(self, experience, context):
        """
        ä¿ç•™ï¼šå°†ç»éªŒè½¬åŒ–ä¸ºç»“æ„åŒ–è®°å¿†
        - æå–å…³é”®ä¿¡æ¯
        - ç”Ÿæˆç»“æ„åŒ–è¡¨ç¤º
        - å»ºç«‹ç´¢å¼•å’Œé“¾æ¥
        """
        pass
    
    def recall(self, query, memory_type=None):
        """
        å›å¿†ï¼šæ ¹æ®æŸ¥è¯¢æ£€ç´¢ç›¸å…³è®°å¿†
        - å¤šæ¨¡æ€æ£€ç´¢ï¼ˆè¯­ä¹‰ã€æ—¶é—´ã€ç©ºé—´ï¼‰
        - åˆ†å±‚æ£€ç´¢ï¼ˆFoA -> DA -> LTMï¼‰
        - ç›¸å…³æ€§æ’åº
        """
        pass
    
    def reflect(self, memories, current_task):
        """
        åæ€ï¼šåŸºäºè®°å¿†è¿›è¡Œæ¨ç†å’Œæ›´æ–°
        - è®°å¿†å…³è”åˆ†æ
        - ä¿¡å¿µæ›´æ–°
        - è®°å¿†ç½‘ç»œä¼˜åŒ–
        """
        pass
```

#### 2. **å­˜å‚¨å±‚ï¼ˆStorage Layerï¼‰** - åŸºäº CogMem + LightMem

```python
class UniMemStorage:
    """
    åˆ†å±‚è®°å¿†å­˜å‚¨ç³»ç»Ÿ
    ç»“åˆ CogMem çš„ä¸‰å±‚æ¶æ„å’Œ LightMem çš„è½»é‡è®¾è®¡
    """
    
    class FocusOfAttention:
        """
        æ³¨æ„åŠ›ç„¦ç‚¹ï¼ˆFoAï¼‰- å·¥ä½œè®°å¿†
        - å®¹é‡ï¼šå°ï¼ˆ~100 tokensï¼‰
        - é€Ÿåº¦ï¼šæå¿«ï¼ˆå†…å­˜è®¿é—®ï¼‰
        - ç”¨é€”ï¼šå½“å‰ä»»åŠ¡ä¸Šä¸‹æ–‡
        """
        pass
    
    class DirectAccess:
        """
        ç›´æ¥è®¿é—®ï¼ˆDAï¼‰- å¿«é€Ÿæ£€ç´¢åŒº
        - å®¹é‡ï¼šä¸­ï¼ˆ~10K tokensï¼‰
        - é€Ÿåº¦ï¼šå¿«ï¼ˆç¼“å­˜è®¿é—®ï¼‰
        - ç”¨é€”ï¼šæœ€è¿‘ç›¸å…³è®°å¿†
        - æ›´æ–°ï¼šLRU + ç›¸å…³æ€§è¯„åˆ†
        """
        pass
    
    class LongTermMemory:
        """
        é•¿æœŸè®°å¿†ï¼ˆLTMï¼‰- æŒä¹…å­˜å‚¨
        - å®¹é‡ï¼šå¤§ï¼ˆæ— é™åˆ¶ï¼‰
        - é€Ÿåº¦ï¼šæ…¢ï¼ˆç£ç›˜/æ•°æ®åº“ï¼‰
        - ç”¨é€”ï¼šæ‰€æœ‰å†å²è®°å¿†
        - ç»“æ„ï¼š
          - æƒ…æ™¯è®°å¿†ï¼ˆäº‹ä»¶åºåˆ—ï¼‰
          - è¯­ä¹‰è®°å¿†ï¼ˆæ¦‚å¿µå›¾è°±ï¼‰
          - ç”¨æˆ·ç”»åƒï¼ˆä¸ªæ€§åŒ–ä¿¡æ¯ï¼‰
        """
        pass
```

#### 3. **ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰** - åŸºäº A-Mem + Graph of Records

```python
class UniMemNetwork:
    """
    åŠ¨æ€è®°å¿†ç½‘ç»œ
    åŸºäº A-Mem çš„ Zettelkasten æ–¹æ³•å’Œå›¾ç»“æ„
    """
    
    class MemoryNode:
        """
        è®°å¿†èŠ‚ç‚¹
        - å†…å®¹ï¼šç»“æ„åŒ–è¡¨ç¤º
        - å±æ€§ï¼šä¸Šä¸‹æ–‡ã€å…³é”®è¯ã€æ ‡ç­¾ã€æ—¶é—´æˆ³
        - é“¾æ¥ï¼šæŒ‡å‘ç›¸å…³è®°å¿†çš„è¾¹
        """
        pass
    
    class MemoryGraph:
        """
        è®°å¿†å›¾è°±
        - èŠ‚ç‚¹ï¼šè®°å¿†å•å…ƒ
        - è¾¹ï¼šå…³è”å…³ç³»ï¼ˆè¯­ä¹‰ã€æ—¶åºã€å› æœç­‰ï¼‰
        - åŠ¨æ€æ›´æ–°ï¼šæ–°è®°å¿†è§¦å‘æ—§è®°å¿†æ›´æ–°
        """
        pass
    
    def add_memory(self, memory):
        """æ·»åŠ è®°å¿†å¹¶å»ºç«‹é“¾æ¥"""
        pass
    
    def evolve_memory(self, new_memory):
        """è®°å¿†è¿›åŒ–ï¼šæ–°è®°å¿†è§¦å‘ç½‘ç»œæ›´æ–°"""
        pass
```

#### 4. **å‹ç¼©å±‚ï¼ˆCompression Layerï¼‰** - åŸºäº ACON

```python
class UniMemCompression:
    """
    ä¸Šä¸‹æ–‡å‹ç¼©
    åŸºäº ACON çš„å‹ç¼©å’Œè’¸é¦æœºåˆ¶
    """
    
    def compress_context(self, context, target_length):
        """å‹ç¼©ä¸Šä¸‹æ–‡ï¼Œä¿ç•™å…³é”®ä¿¡æ¯"""
        pass
    
    def distill_compressor(self):
        """å°†å‹ç¼©å™¨è’¸é¦åˆ°å°æ¨¡å‹"""
        pass
```

#### 5. **æ£€ç´¢å±‚ï¼ˆRetrieval Layerï¼‰** - åŸºäº Every Token Counts

```python
class UniMemRetrieval:
    """
    æ™ºèƒ½æ£€ç´¢ç³»ç»Ÿ
    åŸºäº Every Token Counts çš„ç«¯åˆ°ç«¯å¯å­¦ä¹ æ£€ç´¢
    """
    
    def learnable_retrieval(self, query, memory_pool):
        """ç«¯åˆ°ç«¯å¯å­¦ä¹ çš„æ£€ç´¢æœºåˆ¶"""
        pass
    
    def hierarchical_retrieval(self, query):
        """åˆ†å±‚æ£€ç´¢ï¼šFoA -> DA -> LTM"""
        pass
```

---

## ä¸‰ã€å®Œæ•´æ¶æ„å®ç°

### ç³»ç»Ÿæµç¨‹

```
ç”¨æˆ·è¾“å…¥
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Recall      â”‚ â† ä»è®°å¿†ç½‘ç»œä¸­æ£€ç´¢ç›¸å…³è®°å¿†
â”‚  (å›å¿†)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. FoA æ›´æ–°    â”‚ â† å°†æ£€ç´¢ç»“æœåŠ è½½åˆ°å·¥ä½œè®°å¿†
â”‚  (å·¥ä½œè®°å¿†)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. æ¨ç†/æ‰§è¡Œ   â”‚ â† LLM åŸºäºå·¥ä½œè®°å¿†è¿›è¡Œæ¨ç†
â”‚  (Agent æ ¸å¿ƒ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Retain      â”‚ â† å°†æ–°ç»éªŒè½¬åŒ–ä¸ºç»“æ„åŒ–è®°å¿†
â”‚  (ä¿ç•™)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. ç½‘ç»œæ›´æ–°    â”‚ â† æ·»åŠ åˆ°è®°å¿†ç½‘ç»œå¹¶å»ºç«‹é“¾æ¥
â”‚  (è®°å¿†å›¾è°±)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. Reflect     â”‚ â† åæ€å¹¶ä¼˜åŒ–è®°å¿†ç½‘ç»œ
â”‚  (åæ€)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. åˆ†å±‚å­˜å‚¨    â”‚ â† æ ¹æ®é‡è¦æ€§å­˜å‚¨åˆ°ä¸åŒå±‚çº§
â”‚  (FoA/DA/LTM)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æŠ€æœ¯ç‚¹

#### 1. **è®°å¿†è¡¨ç¤º**

```python
@dataclass
class Memory:
    """ç»Ÿä¸€è®°å¿†è¡¨ç¤º"""
    id: str
    content: str  # åŸå§‹å†…å®¹
    embedding: np.ndarray  # å‘é‡è¡¨ç¤º
    metadata: dict  # å…ƒæ•°æ®
        - timestamp: æ—¶é—´æˆ³
        - context: ä¸Šä¸‹æ–‡
        - keywords: å…³é”®è¯
        - tags: æ ‡ç­¾
        - importance: é‡è¦æ€§è¯„åˆ†
    links: List[str]  # å…³è”çš„è®°å¿†ID
    type: str  # è®°å¿†ç±»å‹ï¼ˆæƒ…æ™¯/è¯­ä¹‰/ç”»åƒï¼‰
```

#### 2. **åˆ†å±‚å­˜å‚¨ç­–ç•¥**

```python
class StorageStrategy:
    """
    å­˜å‚¨ç­–ç•¥ï¼šæ ¹æ®è®°å¿†ç‰¹æ€§å†³å®šå­˜å‚¨ä½ç½®
    """
    
    def store(self, memory: Memory):
        # 1. æ‰€æœ‰è®°å¿†å…ˆè¿›å…¥ FoAï¼ˆå·¥ä½œè®°å¿†ï¼‰
        self.foa.add(memory)
        
        # 2. æ ¹æ®é‡è¦æ€§å†³å®šæ˜¯å¦è¿›å…¥ DA
        if memory.importance > DA_THRESHOLD:
            self.da.add(memory)
        
        # 3. æ‰€æœ‰è®°å¿†æœ€ç»ˆè¿›å…¥ LTM
        self.ltm.add(memory)
        
        # 4. æ›´æ–°è®°å¿†ç½‘ç»œ
        self.network.add_node(memory)
        self.network.create_links(memory)
```

#### 3. **æ™ºèƒ½æ£€ç´¢ç­–ç•¥**

```python
class RetrievalStrategy:
    """
    æ£€ç´¢ç­–ç•¥ï¼šåˆ†å±‚æ£€ç´¢ + å¤šæ¨¡æ€æ£€ç´¢
    """
    
    def retrieve(self, query: str, top_k: int = 10):
        results = []
        
        # 1. ä» FoA æ£€ç´¢ï¼ˆæœ€å¿«ï¼‰
        foa_results = self.foa.search(query, top_k=top_k)
        results.extend(foa_results)
        
        # 2. ä» DA æ£€ç´¢ï¼ˆå¦‚æœ FoA ç»“æœä¸è¶³ï¼‰
        if len(results) < top_k:
            da_results = self.da.search(query, top_k=top_k-len(results))
            results.extend(da_results)
        
        # 3. ä» LTM æ£€ç´¢ï¼ˆå¦‚æœä»ä¸è¶³ï¼‰
        if len(results) < top_k:
            ltm_results = self.ltm.search(query, top_k=top_k-len(results))
            results.extend(ltm_results)
        
        # 4. é€šè¿‡è®°å¿†ç½‘ç»œæ‰©å±•ï¼ˆæ‰¾åˆ°ç›¸å…³è®°å¿†ï¼‰
        network_results = self.network.expand(results)
        results.extend(network_results)
        
        # 5. å»é‡å’Œæ’åº
        return self.rank_and_deduplicate(results)
```

#### 4. **è®°å¿†è¿›åŒ–æœºåˆ¶**

```python
class MemoryEvolution:
    """
    è®°å¿†è¿›åŒ–ï¼šæ–°è®°å¿†è§¦å‘æ—§è®°å¿†æ›´æ–°
    åŸºäº A-Mem çš„è¿›åŒ–æœºåˆ¶
    """
    
    def evolve(self, new_memory: Memory):
        # 1. æ‰¾åˆ°ç›¸å…³è®°å¿†
        related = self.network.find_related(new_memory)
        
        # 2. æ›´æ–°ç›¸å…³è®°å¿†çš„ä¸Šä¸‹æ–‡è¡¨ç¤º
        for memory in related:
            memory.metadata['context'] = self.update_context(
                memory.metadata['context'],
                new_memory
            )
        
        # 3. æ›´æ–°è®°å¿†ç½‘ç»œç»“æ„
        self.network.optimize_links(new_memory)
        
        # 4. è§¦å‘é‡è¦æ€§é‡æ–°è¯„ä¼°
        self.reassess_importance(related)
```

#### 5. **ä¸Šä¸‹æ–‡å‹ç¼©**

```python
class ContextCompression:
    """
    ä¸Šä¸‹æ–‡å‹ç¼©ï¼šåŸºäº ACON
    """
    
    def compress(self, memories: List[Memory], max_tokens: int):
        # 1. é‡è¦æ€§æ’åº
        sorted_memories = sorted(memories, key=lambda m: m.importance, reverse=True)
        
        # 2. å‹ç¼©ä½é‡è¦æ€§è®°å¿†
        compressed = []
        token_count = 0
        
        for memory in sorted_memories:
            if token_count + memory.token_count <= max_tokens:
                compressed.append(memory)
                token_count += memory.token_count
            else:
                # å‹ç¼©è¿™ä¸ªè®°å¿†ï¼ˆä¿ç•™å…³é”®ä¿¡æ¯ï¼‰
                compressed_memory = self.compress_memory(memory)
                compressed.append(compressed_memory)
                break
        
        return compressed
```

---

## å››ã€å®ç°ä¼˜å…ˆçº§

### Phase 1: æ ¸å¿ƒåŠŸèƒ½ï¼ˆMVPï¼‰
1. âœ… ä¸‰å±‚å­˜å‚¨æ¶æ„ï¼ˆFoA/DA/LTMï¼‰
2. âœ… Retain/Recall/Reflect æ“ä½œ
3. âœ… åŸºç¡€è®°å¿†ç½‘ç»œï¼ˆèŠ‚ç‚¹+é“¾æ¥ï¼‰

### Phase 2: æ™ºèƒ½å¢å¼º
4. âœ… ç«¯åˆ°ç«¯å¯å­¦ä¹ æ£€ç´¢
5. âœ… è®°å¿†è¿›åŒ–æœºåˆ¶
6. âœ… ä¸Šä¸‹æ–‡å‹ç¼©

### Phase 3: é«˜çº§ç‰¹æ€§
7. âœ… å¤šç±»å‹è®°å¿†ï¼ˆæƒ…æ™¯/è¯­ä¹‰/ç”»åƒï¼‰
8. âœ… æ—¶ç©ºæ„ŸçŸ¥è®°å¿†
9. âœ… ä¸ªæ€§åŒ–ç”¨æˆ·ç”»åƒ

---

## äº”ã€æŠ€æœ¯æ ˆå»ºè®®

- **å­˜å‚¨**ï¼šRedisï¼ˆFoA/DAï¼‰+ PostgreSQL/Vector DBï¼ˆLTMï¼‰
- **å‘é‡æ£€ç´¢**ï¼šMilvus / Qdrant / Pinecone
- **å›¾æ•°æ®åº“**ï¼šNeo4jï¼ˆè®°å¿†ç½‘ç»œï¼‰
- **å‹ç¼©æ¨¡å‹**ï¼šåŸºäº ACON çš„è’¸é¦æ¨¡å‹
- **æ£€ç´¢æ¨¡å‹**ï¼šç«¯åˆ°ç«¯å¯å­¦ä¹ çš„æ£€ç´¢å™¨

---

## å…­ã€ä¼˜åŠ¿æ€»ç»“

1. **è®¤çŸ¥ç§‘å­¦åŸºç¡€**ï¼šç¬¦åˆäººç±»è®°å¿†çš„ä¸‰å±‚ç»“æ„
2. **å·¥ç¨‹å¯è¡Œæ€§**ï¼šåˆ†å±‚è®¾è®¡ä¾¿äºå®ç°å’Œä¼˜åŒ–
3. **åŠ¨æ€è¿›åŒ–**ï¼šè®°å¿†ç½‘ç»œæŒç»­ä¼˜åŒ–
4. **é«˜æ•ˆæ£€ç´¢**ï¼šåˆ†å±‚æ£€ç´¢ + æ™ºèƒ½æ’åº
5. **èµ„æºä¼˜åŒ–**ï¼šå‹ç¼©æœºåˆ¶é™ä½è®¡ç®—æˆæœ¬
6. **å¯æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•

---

## ä¸ƒã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. å®ç° MVP ç‰ˆæœ¬ï¼ˆPhase 1ï¼‰
2. è®¾è®¡è®°å¿†è¡¨ç¤ºæ ¼å¼
3. å®ç°åŸºç¡€å­˜å‚¨å’Œæ£€ç´¢
4. é›†æˆåˆ°ç°æœ‰ Agent ç³»ç»Ÿ
5. è¯„ä¼°å’Œä¼˜åŒ–
